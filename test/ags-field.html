<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ags-form tests</title>
    <script src="../bower_components/webcomponentsjs/webcomponents.min.js"></script>
    <link rel="import" href="../bower_components/polymer/polymer.html"/>
    <link rel="import" href="../bower_components/polymer-ts/polymer-ts.html"/>
    <script src="../bower_components/web-component-tester/browser.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jsonld/0.4.11/jsonld.min.js"></script>
    <link rel="import" href="../augeas.html"/>
    <script src="_TestHelpers.js"></script>
</head>
<body>

<test-fixture id="no-field-templates">
    <template>
        <ags-field></ags-field>
    </template>
</test-fixture>

<script>

    var getSubject = function () {
        return document.querySelector('ags-field');
    };

    describe('ags-field', function () {

        describe('with property not set', function() {

            prepareFixture('no-field-templates');

            it('should render no field', function (done) {
                flush(function () {
                    var children = getSubject().querySelectorAll('input');

                    assert.equal(children.length, 0);
                    done();
                });
            });
        });

        describe('with no matching template', function () {

            prepareFixture('no-field-templates');

            beforeEach(function () {
                getSubject().property = 'http://www.markus-lanthaler.com/hydra/api-demo/vocab#Issue/title';
            });

            it('should render a text input', function (done) {
                flush(function () {
                    var field = getSubject().querySelector('input');

                    assert.equal(field.constructor, HTMLInputElement);
                    assert.equal(field.type, 'text');
                    done();
                });
            });

            it('should set value property when input value is set', function (done) {

                flush(function () {
                    var input = getSubject().querySelector('input');

                    setInputValue(input, 'I wrote this');

                    assert.equal(getSubject().value, 'I wrote this');
                    done();
                });
            });
        });
    });

</script>
</body>
</html>