<link rel="import" href="ags-field.html">
<dom-module id="ags-form">
    <template>
        <fieldset>
            <legend hidden$="[[!contract.title]]">[[contract.title]]</legend>
            <template is="dom-repeat" items="[[contract.body]]">
                <label>[[item.title]]
                    <ags-field property="[[item.property]]" range="[[item.range]]"
                    required="[[item.required]]" on-value-changed="_fieldValueChanged"></ags-field>
                </label>
            </template>
        </fieldset>
    </template>
    <script>
        (function() {
            "use strict";
            /**
             * Uber element `<ags-form>`
             *
             * @demo ../demo/fp-category-page-demo.html
             */
        
            var AgsForm = Polymer({
                is: "ags-form",
                properties: {
                    value: {
                        type: Object,
                        value: null,
                        notify: true
                    },
                    contract: {
                        type: Object
                    }
                },
                _fieldValueChanged: function(e) {
                    if (!e.detail.value)
                        return;
                    var value = this.value || {};
                    value[e.model.item.property] = [{
                        '@value': e.detail.value
                    }];
                    this.set('value', value);
                }
            });
        
        
        
        }());
    </script>
</dom-module>