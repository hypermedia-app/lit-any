<dom-module id="ags-hydra-adapter">
    <script>
        (function() {
            "use strict";
        
            var AgsHydraAdapter = Polymer({
                is: "ags-hydra-adapter",
                properties: {
                    operation: {
                        type: Object
                    },
                    contract: {
                        type: Object,
                        computed: "_computeContract(operation)"
                    }
                },
                _computeContract: function(operation) {
                    var contract = {};
                    contract.title = operation.title;
                    contract.description = operation.description;
                    contract.body = ((operation.expects || {}).supportedProperties || [])
                        .filter(function(prop) {
                            return prop.writable;
                        })
                        .map(transformSupportedProperty);
                    return contract;
                }
            });
        
        
            function transformSupportedProperty(prop) {
                var fieldContract = {};
                fieldContract.property = prop.property.id;
                fieldContract.range = prop.property.range.id;
                fieldContract.required = prop.required;
                fieldContract.title = prop.title;
                fieldContract.description = prop.description;
                return fieldContract;
            }
        
        }());
    </script>
</dom-module>