{"version":3,"file":"augeas.browser.js","sources":["../node_modules/lit-html/lit-html.js","../node_modules/lit-html/lib/lit-extended.js","../node_modules/@polymer/polymer/lib/utils/boot.js","../node_modules/@polymer/polymer/lib/utils/mixin.js","../node_modules/@polymer/polymer/lib/utils/case-map.js","../node_modules/@polymer/polymer/lib/utils/async.js","../node_modules/@polymer/polymer/lib/mixins/property-accessors.js","../src/template-registry/template-registry.js","../src/template-registry/index.js","../src/elements/ags-view.js"],"sourcesContent":["/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n// The first argument to JS template tags retain identity across multiple\n// calls to a tag for the same literal, so we can cache work done per literal\n// in a Map.\nconst templates = new Map();\n/**\n * Interprets a template literal as an HTML template that can efficiently\n * render to and update a container.\n */\nexport function html(strings, ...values) {\n    let template = templates.get(strings);\n    if (template === undefined) {\n        template = new Template(strings);\n        templates.set(strings, template);\n    }\n    return new TemplateResult(template, values);\n}\n/**\n * The return type of `html`, which holds a Template and the values from\n * interpolated expressions.\n */\nexport class TemplateResult {\n    constructor(template, values) {\n        this.template = template;\n        this.values = values;\n    }\n}\n/**\n * Renders a template to a container.\n *\n * To update a container with new values, reevaluate the template literal and\n * call `render` with the new result.\n */\nexport function render(result, container, partCallback = defaultPartCallback) {\n    let instance = container.__templateInstance;\n    // Repeat render, just call update()\n    if (instance !== undefined && instance.template === result.template &&\n        instance._partCallback === partCallback) {\n        instance.update(result.values);\n        return;\n    }\n    // First render, create a new TemplateInstance and append it\n    instance = new TemplateInstance(result.template, partCallback);\n    container.__templateInstance = instance;\n    const fragment = instance._clone();\n    instance.update(result.values);\n    let child;\n    while ((child = container.lastChild)) {\n        container.removeChild(child);\n    }\n    container.appendChild(fragment);\n}\n/**\n * An expression marker with embedded unique key to avoid\n * https://github.com/PolymerLabs/lit-html/issues/62\n */\nconst exprMarker = `{{lit-${Math.random()}}}`;\n/**\n * A placeholder for a dynamic expression in an HTML template.\n *\n * There are two built-in part types: AttributePart and NodePart. NodeParts\n * always represent a single dynamic expression, while AttributeParts may\n * represent as many expressions are contained in the attribute.\n *\n * A Template's parts are mutable, so parts can be replaced or modified\n * (possibly to implement different template semantics). The contract is that\n * parts can only be replaced, not removed, added or reordered, and parts must\n * always consume the correct number of values in their `update()` method.\n *\n * TODO(justinfagnani): That requirement is a little fragile. A\n * TemplateInstance could instead be more careful about which values it gives\n * to Part.update().\n */\nexport class TemplatePart {\n    constructor(type, index, name, rawName, strings) {\n        this.type = type;\n        this.index = index;\n        this.name = name;\n        this.rawName = rawName;\n        this.strings = strings;\n    }\n}\nexport class Template {\n    constructor(strings) {\n        this.parts = [];\n        this.element = document.createElement('template');\n        this.element.innerHTML = strings.join(exprMarker);\n        const walker = document.createTreeWalker(this.element.content, 5 /* elements & text */);\n        let index = -1;\n        let partIndex = 0;\n        const nodesToRemove = [];\n        while (walker.nextNode()) {\n            index++;\n            const node = walker.currentNode;\n            if (node.nodeType === 1 /* ELEMENT_NODE */) {\n                if (!node.hasAttributes())\n                    continue;\n                const attributes = node.attributes;\n                for (let i = 0; i < attributes.length; i++) {\n                    const attribute = attributes.item(i);\n                    const attributeStrings = attribute.value.split(exprMarker);\n                    if (attributeStrings.length > 1) {\n                        // Get the template literal section leading up to the first\n                        // expression in this attribute attribute\n                        const attributeString = strings[partIndex];\n                        // Trim the trailing literal value if this is an interpolation\n                        const rawNameString = attributeString.substring(0, attributeString.length - attributeStrings[0].length);\n                        // Find the attribute name\n                        const rawName = rawNameString.match(/((?:\\w|[.\\-_$])+)=[\"']?$/)[1];\n                        this.parts.push(new TemplatePart('attribute', index, attribute.name, rawName, attributeStrings));\n                        node.removeAttribute(attribute.name);\n                        partIndex += attributeStrings.length - 1;\n                        i--;\n                    }\n                }\n            }\n            else if (node.nodeType === 3 /* TEXT_NODE */) {\n                const strings = node.nodeValue.split(exprMarker);\n                if (strings.length > 1) {\n                    const parent = node.parentNode;\n                    const lastIndex = strings.length - 1;\n                    // We have a part for each match found\n                    partIndex += lastIndex;\n                    // We keep this current node, but reset its content to the last\n                    // literal part. We insert new literal nodes before this so that the\n                    // tree walker keeps its position correctly.\n                    node.textContent = strings[lastIndex];\n                    // Generate a new text node for each literal section\n                    // These nodes are also used as the markers for node parts\n                    for (let i = 0; i < lastIndex; i++) {\n                        parent.insertBefore(new Text(strings[i]), node);\n                        this.parts.push(new TemplatePart('node', index++));\n                    }\n                }\n                else if (!node.nodeValue.trim()) {\n                    nodesToRemove.push(node);\n                    index--;\n                }\n            }\n        }\n        // Remove text binding nodes after the walk to not disturb the TreeWalker\n        for (const n of nodesToRemove) {\n            n.parentNode.removeChild(n);\n        }\n    }\n}\nexport const getValue = (part, value) => {\n    // `null` as the value of a Text node will render the string 'null'\n    // so we convert it to undefined\n    if (value != null && value.__litDirective === true) {\n        value = value(part);\n    }\n    return value === null ? undefined : value;\n};\nexport const directive = (f) => {\n    f.__litDirective = true;\n    return f;\n};\nexport class AttributePart {\n    constructor(instance, element, name, strings) {\n        this.instance = instance;\n        this.element = element;\n        this.name = name;\n        this.strings = strings;\n        this.size = strings.length - 1;\n    }\n    setValue(values, startIndex) {\n        const strings = this.strings;\n        let text = '';\n        for (let i = 0; i < strings.length; i++) {\n            text += strings[i];\n            if (i < strings.length - 1) {\n                const v = getValue(this, values[startIndex + i]);\n                if (v &&\n                    (Array.isArray(v) || typeof v !== 'string' && v[Symbol.iterator])) {\n                    for (const t of v) {\n                        // TODO: we need to recursively call getValue into iterables...\n                        text += t;\n                    }\n                }\n                else {\n                    text += v;\n                }\n            }\n        }\n        this.element.setAttribute(this.name, text);\n    }\n}\nexport class NodePart {\n    constructor(instance, startNode, endNode) {\n        this.instance = instance;\n        this.startNode = startNode;\n        this.endNode = endNode;\n    }\n    setValue(value) {\n        value = getValue(this, value);\n        if (value === null ||\n            !(typeof value === 'object' || typeof value === 'function')) {\n            // Handle primitive values\n            // If the value didn't change, do nothing\n            if (value === this._previousValue) {\n                return;\n            }\n            this._setText(value);\n        }\n        else if (value instanceof TemplateResult) {\n            this._setTemplateResult(value);\n        }\n        else if (Array.isArray(value) || value[Symbol.iterator]) {\n            this._setIterable(value);\n        }\n        else if (value instanceof Node) {\n            this._setNode(value);\n        }\n        else if (value.then !== undefined) {\n            this._setPromise(value);\n        }\n        else {\n            // Fallback, will render the string representation\n            this._setText(value);\n        }\n    }\n    _insert(node) {\n        this.endNode.parentNode.insertBefore(node, this.endNode);\n    }\n    _setNode(value) {\n        this.clear();\n        this._insert(value);\n        this._previousValue = value;\n    }\n    _setText(value) {\n        const node = this.startNode.nextSibling;\n        if (node === this.endNode.previousSibling &&\n            node.nodeType === Node.TEXT_NODE) {\n            // If we only have a single text node between the markers, we can just\n            // set its value, rather than replacing it.\n            // TODO(justinfagnani): Can we just check if _previousValue is\n            // primitive?\n            node.textContent = value;\n        }\n        else {\n            this._setNode(new Text(value));\n        }\n        this._previousValue = value;\n    }\n    _setTemplateResult(value) {\n        let instance;\n        if (this._previousValue &&\n            this._previousValue.template === value.template) {\n            instance = this._previousValue;\n        }\n        else {\n            instance =\n                new TemplateInstance(value.template, this.instance._partCallback);\n            this._setNode(instance._clone());\n            this._previousValue = instance;\n        }\n        instance.update(value.values);\n    }\n    _setIterable(value) {\n        // For an Iterable, we create a new InstancePart per item, then set its\n        // value to the item. This is a little bit of overhead for every item in\n        // an Iterable, but it lets us recurse easily and efficiently update Arrays\n        // of TemplateResults that will be commonly returned from expressions like:\n        // array.map((i) => html`${i}`), by reusing existing TemplateInstances.\n        // If _previousValue is an array, then the previous render was of an\n        // iterable and _previousValue will contain the NodeParts from the previous\n        // render. If _previousValue is not an array, clear this part and make a new\n        // array for NodeParts.\n        if (!Array.isArray(this._previousValue)) {\n            this.clear();\n            this._previousValue = [];\n        }\n        // Lets of keep track of how many items we stamped so we can clear leftover\n        // items from a previous render\n        const itemParts = this._previousValue;\n        let partIndex = 0;\n        for (const item of value) {\n            // Try to reuse an existing part\n            let itemPart = itemParts[partIndex];\n            // If no existing part, create a new one\n            if (itemPart === undefined) {\n                // If we're creating the first item part, it's startNode should be the\n                // container's startNode\n                let itemStart = this.startNode;\n                // If we're not creating the first part, create a new separator marker\n                // node, and fix up the previous part's endNode to point to it\n                if (partIndex > 0) {\n                    const previousPart = itemParts[partIndex - 1];\n                    itemStart = previousPart.endNode = new Text();\n                    this._insert(itemStart);\n                }\n                itemPart = new NodePart(this.instance, itemStart, this.endNode);\n                itemParts.push(itemPart);\n            }\n            itemPart.setValue(item);\n            partIndex++;\n        }\n        if (partIndex === 0) {\n            this.clear();\n            this._previousValue = undefined;\n        }\n        else if (partIndex < itemParts.length) {\n            const lastPart = itemParts[partIndex - 1];\n            this.clear(lastPart.endNode.previousSibling);\n            lastPart.endNode = this.endNode;\n        }\n    }\n    _setPromise(value) {\n        value.then((v) => {\n            if (this._previousValue === value) {\n                this.setValue(v);\n            }\n        });\n        this._previousValue = value;\n    }\n    clear(startNode = this.startNode) {\n        let node;\n        while ((node = startNode.nextSibling) !== this.endNode) {\n            node.parentNode.removeChild(node);\n        }\n    }\n}\nexport const defaultPartCallback = (instance, templatePart, node) => {\n    if (templatePart.type === 'attribute') {\n        return new AttributePart(instance, node, templatePart.name, templatePart.strings);\n    }\n    else if (templatePart.type === 'node') {\n        return new NodePart(instance, node, node.nextSibling);\n    }\n    throw new Error(`Unknown part type ${templatePart.type}`);\n};\n/**\n * An instance of a `Template` that can be attached to the DOM and updated\n * with new values.\n */\nexport class TemplateInstance {\n    constructor(template, partCallback = defaultPartCallback) {\n        this._parts = [];\n        this.template = template;\n        this._partCallback = partCallback;\n    }\n    update(values) {\n        let valueIndex = 0;\n        for (const part of this._parts) {\n            if (part.size === undefined) {\n                part.setValue(values[valueIndex]);\n                valueIndex++;\n            }\n            else {\n                part.setValue(values, valueIndex);\n                valueIndex += part.size;\n            }\n        }\n    }\n    _clone() {\n        const fragment = document.importNode(this.template.element.content, true);\n        if (this.template.parts.length > 0) {\n            const walker = document.createTreeWalker(fragment, 5 /* elements & text */);\n            const parts = this.template.parts;\n            let index = 0;\n            let partIndex = 0;\n            let templatePart = parts[0];\n            let node = walker.nextNode();\n            while (node != null && partIndex < parts.length) {\n                if (index === templatePart.index) {\n                    this._parts.push(this._partCallback(this, templatePart, node));\n                    templatePart = parts[++partIndex];\n                }\n                else {\n                    index++;\n                    node = walker.nextNode();\n                }\n            }\n        }\n        return fragment;\n    }\n}\n//# sourceMappingURL=lit-html.js.map","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\nimport { AttributePart, defaultPartCallback, getValue, render as baseRender } from '../lit-html.js';\nexport { html } from '../lit-html.js';\n/**\n *\n * @param result Renders a `TemplateResult` to a container using the\n * `extendedPartCallback` PartCallback, which allows templates to set\n * properties and declarative event handlers.\n *\n * Properties are set by default, instead of attributes. Attribute names in\n * lit-html templates preserve case, so properties are case sensitive. If an\n * expression takes up an entire attribute value, then the property is set to\n * that value. If an expression is interpolated with a string or other\n * expressions then the property is set to the string result of the\n * interpolation.\n *\n * To set an attribute instead of a property, append a `$` suffix to the\n * attribute name.\n *\n * Example:\n *\n *     html`<button class$=\"primary\">Buy Now</button>`\n *\n * To set an event handler, prefix the attribute name with `on-`:\n *\n * Example:\n *\n *     html`<button on-click=${(e)=> this.onClickHandler(e)}>Buy Now</button>`\n *\n */\nexport function render(result, container) {\n    baseRender(result, container, extendedPartCallback);\n}\nexport const extendedPartCallback = (instance, templatePart, node) => {\n    if (templatePart.type === 'attribute') {\n        if (templatePart.rawName.startsWith('on-')) {\n            const eventName = templatePart.rawName.substring(3);\n            return new EventPart(instance, node, eventName);\n        }\n        if (templatePart.name.endsWith('$')) {\n            const name = templatePart.name.substring(0, templatePart.name.length - 1);\n            return new AttributePart(instance, node, name, templatePart.strings);\n        }\n        return new PropertyPart(instance, node, templatePart.rawName, templatePart.strings);\n    }\n    return defaultPartCallback(instance, templatePart, node);\n};\nexport class PropertyPart extends AttributePart {\n    setValue(values, startIndex) {\n        const s = this.strings;\n        let value;\n        if (s.length === 2 && s[0] === '' && s[s.length - 1] === '') {\n            // An expression that occupies the whole attribute value will leave\n            // leading and trailing empty strings.\n            value = getValue(this, values[startIndex]);\n        }\n        else {\n            // Interpolation, so interpolate\n            value = '';\n            for (let i = 0; i < s.length; i++) {\n                value += s[i];\n                if (i < s.length - 1) {\n                    value += getValue(this, values[startIndex + i]);\n                }\n            }\n        }\n        this.element[this.name] = value;\n    }\n}\nexport class EventPart {\n    constructor(instance, element, eventName) {\n        this.instance = instance;\n        this.element = element;\n        this.eventName = eventName;\n    }\n    setValue(value) {\n        const listener = getValue(this, value);\n        if (listener === this._listener) {\n            return;\n        }\n        if (listener == null) {\n            this.element.removeEventListener(this.eventName, this);\n        }\n        else if (this._listener == null) {\n            this.element.addEventListener(this.eventName, this);\n        }\n        this._listener = listener;\n    }\n    handleEvent(event) {\n        if (typeof this._listener === 'function') {\n            this._listener.call(this.element, event);\n        }\n        else if (typeof this._listener.handleEvent === 'function') {\n            this._listener.handleEvent(event);\n        }\n    }\n}\n//# sourceMappingURL=lit-extended.js.map","window.JSCompiler_renameProperty = function(prop, obj) { return prop; }\n\n/** @namespace */\nlet Polymer;\n","import './boot.js';\n\n// unique global id for deduping mixins.\nlet dedupeId = 0;\n\n/**\n * @constructor\n * @extends {Function}\n */\nfunction MixinFunction(){}\n/** @type {(WeakMap | undefined)} */\nMixinFunction.prototype.__mixinApplications;\n/** @type {(Object | undefined)} */\nMixinFunction.prototype.__mixinSet;\n\nexport const dedupingMixin = function(mixin) {\n  let mixinApplications = /** @type {!MixinFunction} */(mixin).__mixinApplications;\n  if (!mixinApplications) {\n    mixinApplications = new WeakMap();\n    /** @type {!MixinFunction} */(mixin).__mixinApplications = mixinApplications;\n  }\n  // maintain a unique id for each mixin\n  let mixinDedupeId = dedupeId++;\n  function dedupingMixin(base) {\n    let baseSet = /** @type {!MixinFunction} */(base).__mixinSet;\n    if (baseSet && baseSet[mixinDedupeId]) {\n      return base;\n    }\n    let map = mixinApplications;\n    let extended = map.get(base);\n    if (!extended) {\n      extended = /** @type {!Function} */(mixin)(base);\n      map.set(base, extended);\n    }\n    // copy inherited mixin set from the extended class, or the base class\n    // NOTE: we avoid use of Set here because some browser (IE11)\n    // cannot extend a base Set via the constructor.\n    let mixinSet = Object.create(/** @type {!MixinFunction} */(extended).__mixinSet || baseSet || null);\n    mixinSet[mixinDedupeId] = true;\n    /** @type {!MixinFunction} */(extended).__mixinSet = mixinSet;\n    return extended;\n  }\n\n  return dedupingMixin;\n};\n","import './boot.js';\n\nconst caseMap = {};\nconst DASH_TO_CAMEL = /-[a-z]/g;\nconst CAMEL_TO_DASH = /([A-Z])/g;\n\nexport function dashToCamelCase(dash) {\n  return caseMap[dash] || (\n    caseMap[dash] = dash.indexOf('-') < 0 ? dash : dash.replace(DASH_TO_CAMEL,\n      (m) => m[1].toUpperCase()\n    )\n  );\n}\n\nexport function camelToDashCase(camel) {\n  return caseMap[camel] || (\n    caseMap[camel] = camel.replace(CAMEL_TO_DASH, '-$1').toLowerCase()\n  );\n}\n","import './boot.js';\n\n/** @typedef {{run: function(function(), number=):number, cancel: function(number)}} */\nlet AsyncInterface; // eslint-disable-line no-unused-vars\n\n// Microtask implemented using Mutation Observer\nlet microtaskCurrHandle = 0;\nlet microtaskLastHandle = 0;\nlet microtaskCallbacks = [];\nlet microtaskNodeContent = 0;\nlet microtaskNode = document.createTextNode('');\nnew window.MutationObserver(microtaskFlush).observe(microtaskNode, {characterData: true});\n\nfunction microtaskFlush() {\n  const len = microtaskCallbacks.length;\n  for (let i = 0; i < len; i++) {\n    let cb = microtaskCallbacks[i];\n    if (cb) {\n      try {\n        cb();\n      } catch (e) {\n        setTimeout(() => { throw e; });\n      }\n    }\n  }\n  microtaskCallbacks.splice(0, len);\n  microtaskLastHandle += len;\n}\n\nexport const timeOut = {\n  /**\n   * Returns a sub-module with the async interface providing the provided\n   * delay.\n   *\n   * @memberof Polymer.Async.timeOut\n   * @param {number} delay Time to wait before calling callbacks in ms\n   * @return {AsyncInterface} An async timeout interface\n   */\n  after(delay) {\n    return  {\n      run(fn) { return setTimeout(fn, delay); },\n      cancel: window.clearTimeout.bind(window)\n    };\n  },\n  /**\n   * Enqueues a function called in the next task.\n   *\n   * @memberof Polymer.Async.timeOut\n   * @param {Function} fn Callback to run\n   * @return {number} Handle used for canceling task\n   */\n  run: window.setTimeout.bind(window),\n  /**\n   * Cancels a previously enqueued `timeOut` callback.\n   *\n   * @memberof Polymer.Async.timeOut\n   * @param {number} handle Handle returned from `run` of callback to cancel\n   */\n  cancel: window.clearTimeout.bind(window)\n};\n\nexport const animationFrame = {\n  /**\n   * Enqueues a function called at `requestAnimationFrame` timing.\n   *\n   * @memberof Polymer.Async.animationFrame\n   * @param {Function} fn Callback to run\n   * @return {number} Handle used for canceling task\n   */\n  run: window.requestAnimationFrame.bind(window),\n  /**\n   * Cancels a previously enqueued `animationFrame` callback.\n   *\n   * @memberof Polymer.Async.timeOut\n   * @param {number} handle Handle returned from `run` of callback to cancel\n   */\n  cancel: window.cancelAnimationFrame.bind(window)\n};\n\nexport const idlePeriod = {\n  /**\n   * Enqueues a function called at `requestIdleCallback` timing.\n   *\n   * @memberof Polymer.Async.idlePeriod\n   * @param {function(IdleDeadline)} fn Callback to run\n   * @return {number} Handle used for canceling task\n   */\n  run(fn) {\n    return window.requestIdleCallback ?\n      window.requestIdleCallback(fn) :\n      window.setTimeout(fn, 16);\n  },\n  /**\n   * Cancels a previously enqueued `idlePeriod` callback.\n   *\n   * @memberof Polymer.Async.idlePeriod\n   * @param {number} handle Handle returned from `run` of callback to cancel\n   */\n  cancel(handle) {\n    window.cancelIdleCallback ?\n      window.cancelIdleCallback(handle) :\n      window.clearTimeout(handle);\n  }\n};\n\nexport const microTask = {\n\n  /**\n   * Enqueues a function called at microtask timing.\n   *\n   * @memberof Polymer.Async.microTask\n   * @param {Function} callback Callback to run\n   * @return {number} Handle used for canceling task\n   */\n  run(callback) {\n    microtaskNode.textContent = microtaskNodeContent++;\n    microtaskCallbacks.push(callback);\n    return microtaskCurrHandle++;\n  },\n\n  /**\n   * Cancels a previously enqueued `microTask` callback.\n   *\n   * @memberof Polymer.Async.microTask\n   * @param {number} handle Handle returned from `run` of callback to cancel\n   */\n  cancel(handle) {\n    const idx = handle - microtaskLastHandle;\n    if (idx >= 0) {\n      if (!microtaskCallbacks[idx]) {\n        throw new Error('invalid async handle: ' + handle);\n      }\n      microtaskCallbacks[idx] = null;\n    }\n  }\n\n};\n","import '../utils/boot.js';\nimport { dedupingMixin } from '../utils/mixin.js';\nimport * as caseMap$0 from '../utils/case-map.js';\nimport { microTask } from '../utils/async.js';\n\nlet caseMap = caseMap$0;\n\nlet microtask = microTask;\n\n// Save map of native properties; this forms a blacklist or properties\n// that won't have their values \"saved\" by `saveAccessorValue`, since\n// reading from an HTMLElement accessor from the context of a prototype throws\nconst nativeProperties = {};\nlet proto = HTMLElement.prototype;\nwhile (proto) {\n  let props = Object.getOwnPropertyNames(proto);\n  for (let i=0; i<props.length; i++) {\n    nativeProperties[props[i]] = true;\n  }\n  proto = Object.getPrototypeOf(proto);\n}\n\n/**\n * Used to save the value of a property that will be overridden with\n * an accessor. If the `model` is a prototype, the values will be saved\n * in `__dataProto`, and it's up to the user (or downstream mixin) to\n * decide how/when to set these values back into the accessors.\n * If `model` is already an instance (it has a `__data` property), then\n * the value will be set as a pending property, meaning the user should\n * call `_invalidateProperties` or `_flushProperties` to take effect\n *\n * @param {Object} model Prototype or instance\n * @param {string} property Name of property\n * @private\n */\nfunction saveAccessorValue(model, property) {\n  // Don't read/store value for any native properties since they could throw\n  if (!nativeProperties[property]) {\n    let value = model[property];\n    if (value !== undefined) {\n      if (model.__data) {\n        // Adding accessor to instance; update the property\n        // It is the user's responsibility to call _flushProperties\n        model._setPendingProperty(property, value);\n      } else {\n        // Adding accessor to proto; save proto's value for instance-time use\n        if (!model.__dataProto) {\n          model.__dataProto = {};\n        } else if (!model.hasOwnProperty(JSCompiler_renameProperty('__dataProto', model))) {\n          model.__dataProto = Object.create(model.__dataProto);\n        }\n        model.__dataProto[property] = value;\n      }\n    }\n  }\n}\n\nexport const PropertyAccessors = dedupingMixin(superClass => {\n\n  /**\n   * @polymer\n   * @mixinClass\n   * @implements {Polymer_PropertyAccessors}\n   * @extends HTMLElement\n   * @unrestricted\n   */\n  class PropertyAccessors extends superClass {\n\n    /**\n     * Generates property accessors for all attributes in the standard\n     * static `observedAttributes` array.\n     *\n     * Attribute names are mapped to property names using the `dash-case` to\n     * `camelCase` convention\n     *\n     */\n    static createPropertiesForAttributes() {\n      let a$ = this.observedAttributes;\n      for (let i=0; i < a$.length; i++) {\n        this.prototype._createPropertyAccessor(caseMap.dashToCamelCase(a$[i]));\n      }\n    }\n\n    constructor() {\n      super();\n      /** @type {boolean} */\n      this.__serializing;\n      /** @type {number} */\n      this.__dataCounter;\n      /** @type {boolean} */\n      this.__dataEnabled;\n      /** @type {boolean} */\n      this.__dataReady;\n      /** @type {boolean} */\n      this.__dataInvalid;\n      /** @type {!Object} */\n      this.__data;\n      /** @type {Object} */\n      this.__dataPending;\n      /** @type {Object} */\n      this.__dataOld;\n      /** @type {Object} */\n      this.__dataProto;\n      /** @type {Object} */\n      this.__dataHasAccessor;\n      /** @type {Object} */\n      this.__dataInstanceProps;\n      this._initializeProperties();\n    }\n\n    /**\n     * Implements native Custom Elements `attributeChangedCallback` to\n     * set an attribute value to a property via `_attributeToProperty`.\n     *\n     * @param {string} name Name of attribute that changed\n     * @param {?string} old Old attribute value\n     * @param {?string} value New attribute value\n     */\n    attributeChangedCallback(name, old, value) {\n      if (old !== value) {\n        this._attributeToProperty(name, value);\n      }\n    }\n\n    /**\n     * Initializes the local storage for property accessors.\n     *\n     * Provided as an override point for performing any setup work prior\n     * to initializing the property accessor system.\n     *\n     * @protected\n     */\n    _initializeProperties() {\n      this.__serializing = false;\n      this.__dataCounter = 0;\n      this.__dataEnabled = false;\n      this.__dataReady = false;\n      this.__dataInvalid = false;\n      this.__data = {};\n      this.__dataPending = null;\n      this.__dataOld = null;\n      if (this.__dataProto) {\n        this._initializeProtoProperties(this.__dataProto);\n        this.__dataProto = null;\n      }\n      // Capture instance properties; these will be set into accessors\n      // during first flush. Don't set them here, since we want\n      // these to overwrite defaults/constructor assignments\n      for (let p in this.__dataHasAccessor) {\n        if (this.hasOwnProperty(p)) {\n          this.__dataInstanceProps = this.__dataInstanceProps || {};\n          this.__dataInstanceProps[p] = this[p];\n          delete this[p];\n        }\n      }\n    }\n\n    /**\n     * Called at instance time with bag of properties that were overwritten\n     * by accessors on the prototype when accessors were created.\n     *\n     * The default implementation sets these properties back into the\n     * setter at instance time.  This method is provided as an override\n     * point for customizing or providing more efficient initialization.\n     *\n     * @param {Object} props Bag of property values that were overwritten\n     *   when creating property accessors.\n     * @protected\n     */\n    _initializeProtoProperties(props) {\n      for (let p in props) {\n        this._setProperty(p, props[p]);\n      }\n    }\n\n    /**\n     * Called at ready time with bag of instance properties that overwrote\n     * accessors when the element upgraded.\n     *\n     * The default implementation sets these properties back into the\n     * setter at ready time.  This method is provided as an override\n     * point for customizing or providing more efficient initialization.\n     *\n     * @param {Object} props Bag of property values that were overwritten\n     *   when creating property accessors.\n     * @protected\n     */\n    _initializeInstanceProperties(props) {\n      Object.assign(this, props);\n    }\n\n    /**\n     * Ensures the element has the given attribute. If it does not,\n     * assigns the given value to the attribute.\n     *\n     *\n     * @param {string} attribute Name of attribute to ensure is set.\n     * @param {string} value of the attribute.\n     */\n    _ensureAttribute(attribute, value) {\n      if (!this.hasAttribute(attribute)) {\n        this._valueToNodeAttribute(this, value, attribute);\n      }\n    }\n\n    /**\n     * Deserializes an attribute to its associated property.\n     *\n     * This method calls the `_deserializeValue` method to convert the string to\n     * a typed value.\n     *\n     * @param {string} attribute Name of attribute to deserialize.\n     * @param {?string} value of the attribute.\n     * @param {*=} type type to deserialize to.\n     */\n    _attributeToProperty(attribute, value, type) {\n      // Don't deserialize back to property if currently reflecting\n      if (!this.__serializing) {\n        let property = caseMap.dashToCamelCase(attribute);\n        this[property] = this._deserializeValue(value, type);\n      }\n    }\n\n    /**\n     * Serializes a property to its associated attribute.\n     *\n     * @param {string} property Property name to reflect.\n     * @param {string=} attribute Attribute name to reflect.\n     * @param {*=} value Property value to refect.\n     */\n    _propertyToAttribute(property, attribute, value) {\n      this.__serializing = true;\n      value = (arguments.length < 3) ? this[property] : value;\n      this._valueToNodeAttribute(this, value,\n        attribute || caseMap.camelToDashCase(property));\n      this.__serializing = false;\n    }\n\n    /**\n     * Sets a typed value to an HTML attribute on a node.\n     *\n     * This method calls the `_serializeValue` method to convert the typed\n     * value to a string.  If the `_serializeValue` method returns `undefined`,\n     * the attribute will be removed (this is the default for boolean\n     * type `false`).\n     *\n     * @param {Element} node Element to set attribute to.\n     * @param {*} value Value to serialize.\n     * @param {string} attribute Attribute name to serialize to.\n     */\n    _valueToNodeAttribute(node, value, attribute) {\n      let str = this._serializeValue(value);\n      if (str === undefined) {\n        node.removeAttribute(attribute);\n      } else {\n        node.setAttribute(attribute, str);\n      }\n    }\n\n    /**\n     * Converts a typed JavaScript value to a string.\n     *\n     * This method is called by Polymer when setting JS property values to\n     * HTML attributes.  Users may override this method on Polymer element\n     * prototypes to provide serialization for custom types.\n     *\n     * @param {*} value Property value to serialize.\n     * @return {string | undefined} String serialized from the provided property value.\n     */\n    _serializeValue(value) {\n      /* eslint-disable no-fallthrough */\n      switch (typeof value) {\n        case 'boolean':\n          return value ? '' : undefined;\n\n        case 'object':\n          if (value instanceof Date) {\n            return value.toString();\n          } else if (value) {\n            try {\n              return JSON.stringify(value);\n            } catch(x) {\n              return '';\n            }\n          }\n\n        default:\n          return value != null ? value.toString() : undefined;\n      }\n    }\n\n    /**\n     * Converts a string to a typed JavaScript value.\n     *\n     * This method is called by Polymer when reading HTML attribute values to\n     * JS properties.  Users may override this method on Polymer element\n     * prototypes to provide deserialization for custom `type`s.  Note,\n     * the `type` argument is the value of the `type` field provided in the\n     * `properties` configuration object for a given property, and is\n     * by convention the constructor for the type to deserialize.\n     *\n     * Note: The return value of `undefined` is used as a sentinel value to\n     * indicate the attribute should be removed.\n     *\n     * @param {?string} value Attribute value to deserialize.\n     * @param {*=} type Type to deserialize the string to.\n     * @return {*} Typed value deserialized from the provided string.\n     */\n    _deserializeValue(value, type) {\n      /**\n       * @type {*}\n       */\n      let outValue;\n      switch (type) {\n        case Number:\n          outValue = Number(value);\n          break;\n\n        case Boolean:\n          outValue = (value !== null);\n          break;\n\n        case Object:\n          try {\n            outValue = JSON.parse(/** @type string */(value));\n          } catch(x) {\n            // allow non-JSON literals like Strings and Numbers\n          }\n          break;\n\n        case Array:\n          try {\n            outValue = JSON.parse(/** @type string */(value));\n          } catch(x) {\n            outValue = null;\n            console.warn(`Polymer::Attributes: couldn't decode Array as JSON: ${value}`);\n          }\n          break;\n\n        case Date:\n          outValue = new Date(value);\n          break;\n\n        case String:\n        default:\n          outValue = value;\n          break;\n      }\n\n      return outValue;\n    }\n    /* eslint-enable no-fallthrough */\n\n    /**\n     * Creates a setter/getter pair for the named property with its own\n     * local storage.  The getter returns the value in the local storage,\n     * and the setter calls `_setProperty`, which updates the local storage\n     * for the property and enqueues a `_propertiesChanged` callback.\n     *\n     * This method may be called on a prototype or an instance.  Calling\n     * this method may overwrite a property value that already exists on\n     * the prototype/instance by creating the accessor.  When calling on\n     * a prototype, any overwritten values are saved in `__dataProto`,\n     * and it is up to the subclasser to decide how/when to set those\n     * properties back into the accessor.  When calling on an instance,\n     * the overwritten value is set via `_setPendingProperty`, and the\n     * user should call `_invalidateProperties` or `_flushProperties`\n     * for the values to take effect.\n     *\n     * @param {string} property Name of the property\n     * @param {boolean=} readOnly When true, no setter is created; the\n     *   protected `_setProperty` function must be used to set the property\n     * @protected\n     */\n    _createPropertyAccessor(property, readOnly) {\n      if (!this.hasOwnProperty('__dataHasAccessor')) {\n        this.__dataHasAccessor = Object.assign({}, this.__dataHasAccessor);\n      }\n      if (!this.__dataHasAccessor[property]) {\n        this.__dataHasAccessor[property] = true;\n        saveAccessorValue(this, property);\n        Object.defineProperty(this, property, {\n          /* eslint-disable valid-jsdoc */\n          /** @this {PropertyAccessors} */\n          get: function() {\n            return this.__data[property];\n          },\n          /** @this {PropertyAccessors} */\n          set: readOnly ? function() {} : function(value) {\n            this._setProperty(property, value);\n          }\n          /* eslint-enable */\n        });\n      }\n    }\n\n    /**\n     * Returns true if this library created an accessor for the given property.\n     *\n     * @param {string} property Property name\n     * @return {boolean} True if an accessor was created\n     */\n    _hasAccessor(property) {\n      return this.__dataHasAccessor && this.__dataHasAccessor[property];\n    }\n\n    /**\n     * Updates the local storage for a property (via `_setPendingProperty`)\n     * and enqueues a `_proeprtiesChanged` callback.\n     *\n     * @param {string} property Name of the property\n     * @param {*} value Value to set\n     * @protected\n     */\n    _setProperty(property, value) {\n      if (this._setPendingProperty(property, value)) {\n        this._invalidateProperties();\n      }\n    }\n\n    /**\n     * Updates the local storage for a property, records the previous value,\n     * and adds it to the set of \"pending changes\" that will be passed to the\n     * `_propertiesChanged` callback.  This method does not enqueue the\n     * `_propertiesChanged` callback.\n     *\n     * @param {string} property Name of the property\n     * @param {*} value Value to set\n     * @return {boolean} Returns true if the property changed\n     * @protected\n     */\n    _setPendingProperty(property, value) {\n      let old = this.__data[property];\n      let changed = this._shouldPropertyChange(property, value, old);\n      if (changed) {\n        if (!this.__dataPending) {\n          this.__dataPending = {};\n          this.__dataOld = {};\n        }\n        // Ensure old is captured from the last turn\n        if (this.__dataOld && !(property in this.__dataOld)) {\n          this.__dataOld[property] = old;\n        }\n        this.__data[property] = value;\n        this.__dataPending[property] = value;\n      }\n      return changed;\n    }\n\n    /**\n     * Returns true if the specified property has a pending change.\n     *\n     * @param {string} prop Property name\n     * @return {boolean} True if property has a pending change\n     * @protected\n     */\n    _isPropertyPending(prop) {\n      return Boolean(this.__dataPending && (prop in this.__dataPending));\n    }\n\n    /**\n     * Marks the properties as invalid, and enqueues an async\n     * `_propertiesChanged` callback.\n     *\n     * @protected\n     */\n    _invalidateProperties() {\n      if (!this.__dataInvalid && this.__dataReady) {\n        this.__dataInvalid = true;\n        microtask.run(() => {\n          if (this.__dataInvalid) {\n            this.__dataInvalid = false;\n            this._flushProperties();\n          }\n        });\n      }\n    }\n\n    /**\n     * Call to enable property accessor processing. Before this method is\n     * called accessor values will be set but side effects are\n     * queued. When called, any pending side effects occur immediately.\n     * For elements, generally `connectedCallback` is a normal spot to do so.\n     * It is safe to call this method multiple times as it only turns on\n     * property accessors once.\n     */\n    _enableProperties() {\n      if (!this.__dataEnabled) {\n        this.__dataEnabled = true;\n        if (this.__dataInstanceProps) {\n          this._initializeInstanceProperties(this.__dataInstanceProps);\n          this.__dataInstanceProps = null;\n        }\n        this.ready();\n      }\n    }\n\n    /**\n     * Calls the `_propertiesChanged` callback with the current set of\n     * pending changes (and old values recorded when pending changes were\n     * set), and resets the pending set of changes. Generally, this method\n     * should not be called in user code.\n     *\n     *\n     * @protected\n     */\n    _flushProperties() {\n      if (this.__dataPending && this.__dataOld) {\n        let changedProps = this.__dataPending;\n        this.__dataPending = null;\n        this.__dataCounter++;\n        this._propertiesChanged(this.__data, changedProps, this.__dataOld);\n        this.__dataCounter--;\n      }\n    }\n\n    /**\n     * Lifecycle callback called the first time properties are being flushed.\n     * Prior to `ready`, all property sets through accessors are queued and\n     * their effects are flushed after this method returns.\n     *\n     * Users may override this function to implement behavior that is\n     * dependent on the element having its properties initialized, e.g.\n     * from defaults (initialized from `constructor`, `_initializeProperties`),\n     * `attributeChangedCallback`, or values propagated from host e.g. via\n     * bindings.  `super.ready()` must be called to ensure the data system\n     * becomes enabled.\n     *\n     * @public\n     */\n    ready() {\n      this.__dataReady = true;\n      // Run normal flush\n      this._flushProperties();\n    }\n\n    /**\n     * Callback called when any properties with accessors created via\n     * `_createPropertyAccessor` have been set.\n     *\n     * @param {!Object} currentProps Bag of all current accessor values\n     * @param {!Object} changedProps Bag of properties changed since the last\n     *   call to `_propertiesChanged`\n     * @param {!Object} oldProps Bag of previous values for each property\n     *   in `changedProps`\n     * @protected\n     */\n    _propertiesChanged(currentProps, changedProps, oldProps) { // eslint-disable-line no-unused-vars\n    }\n\n    /**\n     * Method called to determine whether a property value should be\n     * considered as a change and cause the `_propertiesChanged` callback\n     * to be enqueued.\n     *\n     * The default implementation returns `true` for primitive types if a\n     * strict equality check fails, and returns `true` for all Object/Arrays.\n     * The method always returns false for `NaN`.\n     *\n     * Override this method to e.g. provide stricter checking for\n     * Objects/Arrays when using immutable patterns.\n     *\n     * @param {string} property Property name\n     * @param {*} value New property value\n     * @param {*} old Previous property value\n     * @return {boolean} Whether the property should be considered a change\n     *   and enqueue a `_proeprtiesChanged` callback\n     * @protected\n     */\n    _shouldPropertyChange(property, value, old) {\n      return (\n        // Strict equality check\n        (old !== value &&\n         // This ensures (old==NaN, value==NaN) always returns false\n         (old === old || value === value))\n      );\n    }\n\n  }\n\n  return PropertyAccessors;\n\n});\n","import {TemplateResult} from 'lit-html';\n\nexport class Template {\n    get name() {\n        return '';\n    }\n\n    template(object) {}\n\n    matches(object, predicate, scope) {}\n}\n\nexport class TemplateRegistry {\n\n    constructor() {\n        this._templates = [];\n    }\n\n    getTemplate(object, predicate, scope) {\n        return this._templates.find(template => {\n            return template.matches(object, predicate, scope);\n        });\n    }\n\n    push(template) {\n        this._templates.push(template);\n    }\n\n    _clear() {\n        this._templates = [];\n    }\n}\n\n\n","import {TemplateRegistry} from './template-registry';\n\nexport const ViewTemplates = new TemplateRegistry();\nexport const FormTemplates = new TemplateRegistry();\n","import {html} from 'lit-html';\nimport {render} from 'lit-html/lib/lit-extended';\nimport {PropertyAccessors} from '@polymer/polymer/lib/mixins/property-accessors';\nimport {ViewTemplates} from '../template-registry';\n\nconst defaultWrapper = (view) => html`\n<style>\n:host {\n    display: block;\n    @apply(--object-view);\n}\n${view}\n</style>`;\n\nconst notFoundTemplate = html`<div>Template not found</div>`;\n\nexport class AgsView extends PropertyAccessors(HTMLElement) {\n\n    constructor(){\n        super();\n\n        this.predicate = null;\n        this.templateScope = null;\n        this.object = null;\n        this.ignoreMissing = false;\n        this.hasBeenRendered = false;\n        this.params = {};\n    }\n\n    static get observedAttributes() {\n        return [\n            'object',\n            'predicate',\n            'templateScope',\n            'ignoreMissing',\n            'params'\n        ];\n    }\n\n    connectedCallback() {\n        this._enableProperties();\n    }\n\n    _propertiesChanged() {\n        this._render();\n    }\n\n    _render() {\n        if(this.object) {\n            if (!this.shadowRoot) {\n                this.attachShadow({mode: 'open'});\n            }\n\n            const template = ViewTemplates.getTemplate(this.object, this.predicate, this.templateScope);\n            let result;\n\n            if (template) {\n                if (template.name) {\n                    this.setAttribute('data-template', template.name);\n                }\n\n                result = defaultWrapper(template.template(this.object, this.params));\n            } else if (!this.ignoreMissing) {\n                result = notFoundTemplate;\n\n                console.warn('Template not found for', this.object);\n            }\n\n            render(result, this.shadowRoot);\n        }\n\n        this.dispatchEvent(new CustomEvent('render', {}));\n    }\n}\n\nfunction replaceContent(elementRoot, newContent) {\n    elementRoot.appendChild(newContent);\n\n    this._setHasBeenRendered(true);\n}\n\nAgsView.createPropertiesForAttributes();\n\nwindow.customElements.define('ags-view', AgsView);\n"],"names":["templates","Map","html","strings","template","get","undefined","Template","set","values","TemplateResult","render","result","container","partCallback","defaultPartCallback","instance","__templateInstance","_partCallback","update","TemplateInstance","fragment","_clone","child","lastChild","removeChild","appendChild","exprMarker","Math","random","TemplatePart","type","index","name","rawName","parts","element","document","createElement","innerHTML","join","walker","createTreeWalker","content","partIndex","nodesToRemove","nextNode","node","currentNode","nodeType","hasAttributes","attributes","i","length","attribute","item","attributeStrings","value","split","attributeString","rawNameString","substring","match","push","removeAttribute","nodeValue","parent","parentNode","lastIndex","textContent","insertBefore","Text","trim","n","getValue","part","__litDirective","AttributePart","size","startIndex","text","v","Array","isArray","Symbol","iterator","t","setAttribute","NodePart","startNode","endNode","_previousValue","_setText","_setTemplateResult","_setIterable","Node","_setNode","then","_setPromise","clear","_insert","nextSibling","previousSibling","TEXT_NODE","itemParts","itemPart","itemStart","previousPart","setValue","lastPart","templatePart","Error","_parts","valueIndex","importNode","extendedPartCallback","startsWith","eventName","EventPart","endsWith","PropertyPart","s","listener","_listener","removeEventListener","addEventListener","event","call","handleEvent","window","JSCompiler_renameProperty","prop","obj","dedupeId","MixinFunction","prototype","__mixinApplications","__mixinSet","dedupingMixin","mixin","mixinApplications","WeakMap","mixinDedupeId","base","baseSet","map","extended","mixinSet","Object","create","caseMap","DASH_TO_CAMEL","CAMEL_TO_DASH","dashToCamelCase","dash","indexOf","replace","m","toUpperCase","camelToDashCase","camel","toLowerCase","microtaskCurrHandle","microtaskLastHandle","microtaskCallbacks","microtaskNodeContent","microtaskNode","createTextNode","MutationObserver","microtaskFlush","observe","characterData","len","cb","e","splice","timeOut","delay","fn","setTimeout","clearTimeout","bind","animationFrame","requestAnimationFrame","cancelAnimationFrame","microTask","callback","handle","idx","caseMap$0","microtask","nativeProperties","proto","HTMLElement","props","getOwnPropertyNames","getPrototypeOf","saveAccessorValue","model","property","__data","_setPendingProperty","__dataProto","hasOwnProperty","PropertyAccessors","a$","observedAttributes","_createPropertyAccessor","__serializing","__dataCounter","__dataEnabled","__dataReady","__dataInvalid","__dataPending","__dataOld","__dataHasAccessor","__dataInstanceProps","_initializeProperties","old","_attributeToProperty","_initializeProtoProperties","p","_setProperty","assign","hasAttribute","_valueToNodeAttribute","_deserializeValue","arguments","str","_serializeValue","Date","toString","JSON","stringify","x","outValue","Number","Boolean","parse","warn","String","readOnly","defineProperty","_invalidateProperties","changed","_shouldPropertyChange","run","_flushProperties","_initializeInstanceProperties","ready","changedProps","_propertiesChanged","currentProps","oldProps","superClass","object","predicate","scope","TemplateRegistry","_templates","find","matches","ViewTemplates","FormTemplates","defaultWrapper","view","notFoundTemplate","AgsView","templateScope","ignoreMissing","hasBeenRendered","params","_enableProperties","_render","shadowRoot","attachShadow","mode","getTemplate","dispatchEvent","CustomEvent","createPropertiesForAttributes","customElements","define"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;;;;;;;;;;;;;AAgBA,IAAMA,YAAY,IAAIC,GAAJ,EAAlB;;;;;AAKA,AAAO,SAASC,IAAT,CAAcC,OAAd,EAAkC;QACjCC,WAAWJ,UAAUK,GAAV,CAAcF,OAAd,CAAf;QACIC,aAAaE,SAAjB,EAA4B;mBACb,IAAIC,QAAJ,CAAaJ,OAAb,CAAX;kBACUK,GAAV,CAAcL,OAAd,EAAuBC,QAAvB;;;sCAJyBK,MAAQ;cAAA;;;WAM9B,IAAIC,cAAJ,CAAmBN,QAAnB,EAA6BK,MAA7B,CAAP;;;;;;AAMJ,IAAaC,cAAb,GACI,wBAAYN,QAAZ,EAAsBK,MAAtB,EAA8B;;;SACrBL,QAAL,GAAgBA,QAAhB;SACKK,MAAL,GAAcA,MAAd;CAHR;;;;;;;AAYA,AAAO,SAASE,MAAT,CAAgBC,MAAhB,EAAwBC,SAAxB,EAAuE;QAApCC,YAAoC,uEAArBC,mBAAqB;;QACtEC,WAAWH,UAAUI,kBAAzB;;QAEID,aAAaV,SAAb,IAA0BU,SAASZ,QAAT,KAAsBQ,OAAOR,QAAvD,IACAY,SAASE,aAAT,KAA2BJ,YAD/B,EAC6C;iBAChCK,MAAT,CAAgBP,OAAOH,MAAvB;;;;eAIO,IAAIW,gBAAJ,CAAqBR,OAAOR,QAA5B,EAAsCU,YAAtC,CAAX;cACUG,kBAAV,GAA+BD,QAA/B;QACMK,WAAWL,SAASM,MAAT,EAAjB;aACSH,MAAT,CAAgBP,OAAOH,MAAvB;QACIc,cAAJ;WACQA,QAAQV,UAAUW,SAA1B,EAAsC;kBACxBC,WAAV,CAAsBF,KAAtB;;cAEMG,WAAV,CAAsBL,QAAtB;;;;;;AAMJ,IAAMM,wBAAsBC,KAAKC,MAAL,EAAtB,OAAN;;;;;;;;;;;;;;;;;AAiBA,IAAaC,YAAb,GACI,sBAAYC,IAAZ,EAAkBC,KAAlB,EAAyBC,IAAzB,EAA+BC,OAA/B,EAAwC/B,OAAxC,EAAiD;;;SACxC4B,IAAL,GAAYA,IAAZ;SACKC,KAAL,GAAaA,KAAb;SACKC,IAAL,GAAYA,IAAZ;SACKC,OAAL,GAAeA,OAAf;SACK/B,OAAL,GAAeA,OAAf;CANR;AASA,IAAaI,QAAb,GACI,kBAAYJ,OAAZ,EAAqB;;;SACZgC,KAAL,GAAa,EAAb;SACKC,OAAL,GAAeC,SAASC,aAAT,CAAuB,UAAvB,CAAf;SACKF,OAAL,CAAaG,SAAb,GAAyBpC,QAAQqC,IAAR,CAAab,UAAb,CAAzB;QACMc,SAASJ,SAASK,gBAAT,CAA0B,KAAKN,OAAL,CAAaO,OAAvC,EAAgD,CAAhD,uBAAf;QACIX,QAAQ,CAAC,CAAb;QACIY,YAAY,CAAhB;QACMC,gBAAgB,EAAtB;WACOJ,OAAOK,QAAP,EAAP,EAA0B;;YAEhBC,OAAON,OAAOO,WAApB;YACID,KAAKE,QAAL,KAAkB,CAAtB,qBAA4C;oBACpC,CAACF,KAAKG,aAAL,EAAL,EACI;oBACEC,aAAaJ,KAAKI,UAAxB;qBACK,IAAIC,IAAI,CAAb,EAAgBA,IAAID,WAAWE,MAA/B,EAAuCD,GAAvC,EAA4C;wBAClCE,YAAYH,WAAWI,IAAX,CAAgBH,CAAhB,CAAlB;wBACMI,mBAAmBF,UAAUG,KAAV,CAAgBC,KAAhB,CAAsB/B,UAAtB,CAAzB;wBACI6B,iBAAiBH,MAAjB,GAA0B,CAA9B,EAAiC;;;4BAGvBM,kBAAkBxD,QAAQyC,SAAR,CAAxB;;4BAEMgB,gBAAgBD,gBAAgBE,SAAhB,CAA0B,CAA1B,EAA6BF,gBAAgBN,MAAhB,GAAyBG,iBAAiB,CAAjB,EAAoBH,MAA1E,CAAtB;;4BAEMnB,UAAU0B,cAAcE,KAAd,CAAoB,0BAApB,EAAgD,CAAhD,CAAhB;6BACK3B,KAAL,CAAW4B,IAAX,CAAgB,IAAIjC,YAAJ,CAAiB,WAAjB,EAA8BE,KAA9B,EAAqCsB,UAAUrB,IAA/C,EAAqDC,OAArD,EAA8DsB,gBAA9D,CAAhB;6BACKQ,eAAL,CAAqBV,UAAUrB,IAA/B;qCACauB,iBAAiBH,MAAjB,GAA0B,CAAvC;;;;aAjBZ,MAsBK,IAAIN,KAAKE,QAAL,KAAkB,CAAtB,kBAAyC;oBACpC9C,WAAU4C,KAAKkB,SAAL,CAAeP,KAAf,CAAqB/B,UAArB,CAAhB;oBACIxB,SAAQkD,MAAR,GAAiB,CAArB,EAAwB;wBACda,SAASnB,KAAKoB,UAApB;wBACMC,YAAYjE,SAAQkD,MAAR,GAAiB,CAAnC;;iCAEae,SAAb;;;;yBAIKC,WAAL,GAAmBlE,SAAQiE,SAAR,CAAnB;;;yBAGK,IAAIhB,KAAI,CAAb,EAAgBA,KAAIgB,SAApB,EAA+BhB,IAA/B,EAAoC;+BACzBkB,YAAP,CAAoB,IAAIC,IAAJ,CAASpE,SAAQiD,EAAR,CAAT,CAApB,EAA0CL,IAA1C;6BACKZ,KAAL,CAAW4B,IAAX,CAAgB,IAAIjC,YAAJ,CAAiB,MAAjB,EAAyBE,OAAzB,CAAhB;;iBAbR,MAgBK,IAAI,CAACe,KAAKkB,SAAL,CAAeO,IAAf,EAAL,EAA4B;kCACfT,IAAd,CAAmBhB,IAAnB;;;;;;;;;;;6BAMIF,aAAhB,8HAA+B;gBAApB4B,CAAoB;;cACzBN,UAAF,CAAa1C,WAAb,CAAyBgD,CAAzB;;;;;;;;;;;;;;;;CA5DZ;AAgEA,AAAO,IAAMC,WAAW,SAAXA,QAAW,CAACC,IAAD,EAAOlB,KAAP,EAAiB;;;QAGjCA,SAAS,IAAT,IAAiBA,MAAMmB,cAAN,KAAyB,IAA9C,EAAoD;gBACxCnB,MAAMkB,IAAN,CAAR;;WAEGlB,UAAU,IAAV,GAAiBnD,SAAjB,GAA6BmD,KAApC;CANG;AAQP;AAIA,IAAaoB,aAAb;2BACgB7D,QAAZ,EAAsBoB,OAAtB,EAA+BH,IAA/B,EAAqC9B,OAArC,EAA8C;;;aACrCa,QAAL,GAAgBA,QAAhB;aACKoB,OAAL,GAAeA,OAAf;aACKH,IAAL,GAAYA,IAAZ;aACK9B,OAAL,GAAeA,OAAf;aACK2E,IAAL,GAAY3E,QAAQkD,MAAR,GAAiB,CAA7B;;;;;iCAEK5C,MARb,EAQqBsE,UARrB,EAQiC;gBACnB5E,UAAU,KAAKA,OAArB;gBACI6E,OAAO,EAAX;iBACK,IAAI5B,IAAI,CAAb,EAAgBA,IAAIjD,QAAQkD,MAA5B,EAAoCD,GAApC,EAAyC;wBAC7BjD,QAAQiD,CAAR,CAAR;oBACIA,IAAIjD,QAAQkD,MAAR,GAAiB,CAAzB,EAA4B;wBAClB4B,IAAIP,SAAS,IAAT,EAAejE,OAAOsE,aAAa3B,CAApB,CAAf,CAAV;wBACI6B,MACCC,MAAMC,OAAN,CAAcF,CAAd,KAAoB,OAAOA,CAAP,KAAa,QAAb,IAAyBA,EAAEG,OAAOC,QAAT,CAD9C,CAAJ,EACuE;;;;;;kDACnDJ,CAAhB,mIAAmB;oCAARK,CAAQ;;;wCAEPA,CAAR;;;;;;;;;;;;;;;;qBAJR,MAOK;gCACOL,CAAR;;;;iBAIP7C,OAAL,CAAamD,YAAb,CAA0B,KAAKtD,IAA/B,EAAqC+C,IAArC;;;;;AAGR,IAAaQ,QAAb;sBACgBxE,QAAZ,EAAsByE,SAAtB,EAAiCC,OAAjC,EAA0C;;;aACjC1E,QAAL,GAAgBA,QAAhB;aACKyE,SAAL,GAAiBA,SAAjB;aACKC,OAAL,GAAeA,OAAf;;;;;iCAEKjC,KANb,EAMoB;oBACJiB,SAAS,IAAT,EAAejB,KAAf,CAAR;gBACIA,UAAU,IAAV,IACA,EAAE,QAAOA,KAAP,yCAAOA,KAAP,OAAiB,QAAjB,IAA6B,OAAOA,KAAP,KAAiB,UAAhD,CADJ,EACiE;;;oBAGzDA,UAAU,KAAKkC,cAAnB,EAAmC;;;qBAG9BC,QAAL,CAAcnC,KAAd;aAPJ,MASK,IAAIA,iBAAiB/C,cAArB,EAAqC;qBACjCmF,kBAAL,CAAwBpC,KAAxB;aADC,MAGA,IAAIyB,MAAMC,OAAN,CAAc1B,KAAd,KAAwBA,MAAM2B,OAAOC,QAAb,CAA5B,EAAoD;qBAChDS,YAAL,CAAkBrC,KAAlB;aADC,MAGA,IAAIA,iBAAiBsC,IAArB,EAA2B;qBACvBC,QAAL,CAAcvC,KAAd;aADC,MAGA,IAAIA,MAAMwC,IAAN,KAAe3F,SAAnB,EAA8B;qBAC1B4F,WAAL,CAAiBzC,KAAjB;aADC,MAGA;;qBAEImC,QAAL,CAAcnC,KAAd;;;;;gCAGAV,IAlCZ,EAkCkB;iBACL2C,OAAL,CAAavB,UAAb,CAAwBG,YAAxB,CAAqCvB,IAArC,EAA2C,KAAK2C,OAAhD;;;;iCAEKjC,KArCb,EAqCoB;iBACP0C,KAAL;iBACKC,OAAL,CAAa3C,KAAb;iBACKkC,cAAL,GAAsBlC,KAAtB;;;;iCAEKA,KA1Cb,EA0CoB;gBACNV,OAAO,KAAK0C,SAAL,CAAeY,WAA5B;gBACItD,SAAS,KAAK2C,OAAL,CAAaY,eAAtB,IACAvD,KAAKE,QAAL,KAAkB8C,KAAKQ,SAD3B,EACsC;;;;;qBAK7BlC,WAAL,GAAmBZ,KAAnB;aANJ,MAQK;qBACIuC,QAAL,CAAc,IAAIzB,IAAJ,CAASd,KAAT,CAAd;;iBAECkC,cAAL,GAAsBlC,KAAtB;;;;2CAEeA,KAzDvB,EAyD8B;gBAClBzC,iBAAJ;gBACI,KAAK2E,cAAL,IACA,KAAKA,cAAL,CAAoBvF,QAApB,KAAiCqD,MAAMrD,QAD3C,EACqD;2BACtC,KAAKuF,cAAhB;aAFJ,MAIK;2BAEG,IAAIvE,gBAAJ,CAAqBqC,MAAMrD,QAA3B,EAAqC,KAAKY,QAAL,CAAcE,aAAnD,CADJ;qBAEK8E,QAAL,CAAchF,SAASM,MAAT,EAAd;qBACKqE,cAAL,GAAsB3E,QAAtB;;qBAEKG,MAAT,CAAgBsC,MAAMhD,MAAtB;;;;qCAESgD,KAvEjB,EAuEwB;;;;;;;;;;gBAUZ,CAACyB,MAAMC,OAAN,CAAc,KAAKQ,cAAnB,CAAL,EAAyC;qBAChCQ,KAAL;qBACKR,cAAL,GAAsB,EAAtB;;;;gBAIEa,YAAY,KAAKb,cAAvB;gBACI/C,YAAY,CAAhB;;;;;;sCACmBa,KAAnB,mIAA0B;wBAAfF,IAAe;;;wBAElBkD,WAAWD,UAAU5D,SAAV,CAAf;;wBAEI6D,aAAanG,SAAjB,EAA4B;;;4BAGpBoG,YAAY,KAAKjB,SAArB;;;4BAGI7C,YAAY,CAAhB,EAAmB;gCACT+D,eAAeH,UAAU5D,YAAY,CAAtB,CAArB;wCACY+D,aAAajB,OAAb,GAAuB,IAAInB,IAAJ,EAAnC;iCACK6B,OAAL,CAAaM,SAAb;;mCAEO,IAAIlB,QAAJ,CAAa,KAAKxE,QAAlB,EAA4B0F,SAA5B,EAAuC,KAAKhB,OAA5C,CAAX;kCACU3B,IAAV,CAAe0C,QAAf;;6BAEKG,QAAT,CAAkBrD,IAAlB;;;;;;;;;;;;;;;;;;gBAGAX,cAAc,CAAlB,EAAqB;qBACZuD,KAAL;qBACKR,cAAL,GAAsBrF,SAAtB;aAFJ,MAIK,IAAIsC,YAAY4D,UAAUnD,MAA1B,EAAkC;oBAC7BwD,WAAWL,UAAU5D,YAAY,CAAtB,CAAjB;qBACKuD,KAAL,CAAWU,SAASnB,OAAT,CAAiBY,eAA5B;yBACSZ,OAAT,GAAmB,KAAKA,OAAxB;;;;;oCAGIjC,KAxHhB,EAwHuB;;;kBACTwC,IAAN,CAAW,UAAChB,CAAD,EAAO;oBACV,MAAKU,cAAL,KAAwBlC,KAA5B,EAAmC;0BAC1BmD,QAAL,CAAc3B,CAAd;;aAFR;iBAKKU,cAAL,GAAsBlC,KAAtB;;;;gCAE8B;gBAA5BgC,SAA4B,uEAAhB,KAAKA,SAAW;;gBAC1B1C,aAAJ;mBACO,CAACA,OAAO0C,UAAUY,WAAlB,MAAmC,KAAKX,OAA/C,EAAwD;qBAC/CvB,UAAL,CAAgB1C,WAAhB,CAA4BsB,IAA5B;;;;;;AAIZ,AAAO,IAAMhC,sBAAsB,SAAtBA,mBAAsB,CAACC,QAAD,EAAW8F,YAAX,EAAyB/D,IAAzB,EAAkC;QAC7D+D,aAAa/E,IAAb,KAAsB,WAA1B,EAAuC;eAC5B,IAAI8C,aAAJ,CAAkB7D,QAAlB,EAA4B+B,IAA5B,EAAkC+D,aAAa7E,IAA/C,EAAqD6E,aAAa3G,OAAlE,CAAP;KADJ,MAGK,IAAI2G,aAAa/E,IAAb,KAAsB,MAA1B,EAAkC;eAC5B,IAAIyD,QAAJ,CAAaxE,QAAb,EAAuB+B,IAAvB,EAA6BA,KAAKsD,WAAlC,CAAP;;UAEE,IAAIU,KAAJ,wBAA+BD,aAAa/E,IAA5C,CAAN;CAPG;;;;;AAaP,IAAaX,gBAAb;8BACgBhB,QAAZ,EAA0D;YAApCU,YAAoC,uEAArBC,mBAAqB;;;aACjDiG,MAAL,GAAc,EAAd;aACK5G,QAAL,GAAgBA,QAAhB;aACKc,aAAL,GAAqBJ,YAArB;;;;;+BAEGL,MANX,EAMmB;gBACPwG,aAAa,CAAjB;;;;;;sCACmB,KAAKD,MAAxB,mIAAgC;wBAArBrC,IAAqB;;wBACxBA,KAAKG,IAAL,KAAcxE,SAAlB,EAA6B;6BACpBsG,QAAL,CAAcnG,OAAOwG,UAAP,CAAd;;qBADJ,MAIK;6BACIL,QAAL,CAAcnG,MAAd,EAAsBwG,UAAtB;sCACctC,KAAKG,IAAnB;;;;;;;;;;;;;;;;;;;;iCAIH;gBACCzD,WAAWgB,SAAS6E,UAAT,CAAoB,KAAK9G,QAAL,CAAcgC,OAAd,CAAsBO,OAA1C,EAAmD,IAAnD,CAAjB;gBACI,KAAKvC,QAAL,CAAc+B,KAAd,CAAoBkB,MAApB,GAA6B,CAAjC,EAAoC;oBAC1BZ,UAASJ,SAASK,gBAAT,CAA0BrB,QAA1B,EAAoC,CAApC,uBAAf;oBACMc,QAAQ,KAAK/B,QAAL,CAAc+B,KAA5B;oBACIH,SAAQ,CAAZ;oBACIY,aAAY,CAAhB;oBACIkE,eAAe3E,MAAM,CAAN,CAAnB;oBACIY,OAAON,QAAOK,QAAP,EAAX;uBACOC,QAAQ,IAAR,IAAgBH,aAAYT,MAAMkB,MAAzC,EAAiD;wBACzCrB,WAAU8E,aAAa9E,KAA3B,EAAkC;6BACzBgF,MAAL,CAAYjD,IAAZ,CAAiB,KAAK7C,aAAL,CAAmB,IAAnB,EAAyB4F,YAAzB,EAAuC/D,IAAvC,CAAjB;uCACeZ,MAAM,EAAES,UAAR,CAAf;qBAFJ,MAIK;;+BAEMH,QAAOK,QAAP,EAAP;;;;mBAILzB,QAAP;;;;;;ACnYR;;;;;;;;;;;;;AAaA,AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA,AAAO,SAASV,QAAT,CAAgBC,MAAhB,EAAwBC,SAAxB,EAAmC;WAC3BD,MAAX,EAAmBC,SAAnB,EAA8BsG,oBAA9B;;AAEJ,AAAO,IAAMA,uBAAuB,SAAvBA,oBAAuB,CAACnG,QAAD,EAAW8F,YAAX,EAAyB/D,IAAzB,EAAkC;QAC9D+D,aAAa/E,IAAb,KAAsB,WAA1B,EAAuC;YAC/B+E,aAAa5E,OAAb,CAAqBkF,UAArB,CAAgC,KAAhC,CAAJ,EAA4C;gBAClCC,YAAYP,aAAa5E,OAAb,CAAqB2B,SAArB,CAA+B,CAA/B,CAAlB;mBACO,IAAIyD,SAAJ,CAActG,QAAd,EAAwB+B,IAAxB,EAA8BsE,SAA9B,CAAP;;YAEAP,aAAa7E,IAAb,CAAkBsF,QAAlB,CAA2B,GAA3B,CAAJ,EAAqC;gBAC3BtF,OAAO6E,aAAa7E,IAAb,CAAkB4B,SAAlB,CAA4B,CAA5B,EAA+BiD,aAAa7E,IAAb,CAAkBoB,MAAlB,GAA2B,CAA1D,CAAb;mBACO,IAAIwB,aAAJ,CAAkB7D,QAAlB,EAA4B+B,IAA5B,EAAkCd,IAAlC,EAAwC6E,aAAa3G,OAArD,CAAP;;eAEG,IAAIqH,YAAJ,CAAiBxG,QAAjB,EAA2B+B,IAA3B,EAAiC+D,aAAa5E,OAA9C,EAAuD4E,aAAa3G,OAApE,CAAP;;WAEGY,oBAAoBC,QAApB,EAA8B8F,YAA9B,EAA4C/D,IAA5C,CAAP;CAZG;AAcP,IAAayE,YAAb;;;;;;;;;;iCACa/G,MADb,EACqBsE,UADrB,EACiC;gBACnB0C,IAAI,KAAKtH,OAAf;gBACIsD,cAAJ;gBACIgE,EAAEpE,MAAF,KAAa,CAAb,IAAkBoE,EAAE,CAAF,MAAS,EAA3B,IAAiCA,EAAEA,EAAEpE,MAAF,GAAW,CAAb,MAAoB,EAAzD,EAA6D;;;wBAGjDqB,SAAS,IAAT,EAAejE,OAAOsE,UAAP,CAAf,CAAR;aAHJ,MAKK;;wBAEO,EAAR;qBACK,IAAI3B,IAAI,CAAb,EAAgBA,IAAIqE,EAAEpE,MAAtB,EAA8BD,GAA9B,EAAmC;6BACtBqE,EAAErE,CAAF,CAAT;wBACIA,IAAIqE,EAAEpE,MAAF,GAAW,CAAnB,EAAsB;iCACTqB,SAAS,IAAT,EAAejE,OAAOsE,aAAa3B,CAApB,CAAf,CAAT;;;;iBAIPhB,OAAL,CAAa,KAAKH,IAAlB,IAA0BwB,KAA1B;;;;EAnB0BoB,aAAlC;AAsBA,IAAayC,SAAb;uBACgBtG,QAAZ,EAAsBoB,OAAtB,EAA+BiF,SAA/B,EAA0C;;;aACjCrG,QAAL,GAAgBA,QAAhB;aACKoB,OAAL,GAAeA,OAAf;aACKiF,SAAL,GAAiBA,SAAjB;;;;;iCAEK5D,KANb,EAMoB;gBACNiE,WAAWhD,SAAS,IAAT,EAAejB,KAAf,CAAjB;gBACIiE,aAAa,KAAKC,SAAtB,EAAiC;;;gBAG7BD,YAAY,IAAhB,EAAsB;qBACbtF,OAAL,CAAawF,mBAAb,CAAiC,KAAKP,SAAtC,EAAiD,IAAjD;aADJ,MAGK,IAAI,KAAKM,SAAL,IAAkB,IAAtB,EAA4B;qBACxBvF,OAAL,CAAayF,gBAAb,CAA8B,KAAKR,SAAnC,EAA8C,IAA9C;;iBAECM,SAAL,GAAiBD,QAAjB;;;;oCAEQI,KAnBhB,EAmBuB;gBACX,OAAO,KAAKH,SAAZ,KAA0B,UAA9B,EAA0C;qBACjCA,SAAL,CAAeI,IAAf,CAAoB,KAAK3F,OAAzB,EAAkC0F,KAAlC;aADJ,MAGK,IAAI,OAAO,KAAKH,SAAL,CAAeK,WAAtB,KAAsC,UAA1C,EAAsD;qBAClDL,SAAL,CAAeK,WAAf,CAA2BF,KAA3B;;;;;;;ACzGZG,OAAOC,yBAAP,GAAmC,UAASC,IAAT,EAAeC,GAAf,EAAoB;SAASD,IAAP;CAAzD;;ACEA;AACA,IAAIE,WAAW,CAAf;;;;;;AAMA,SAASC,aAAT,GAAwB;;AAExBA,cAAcC,SAAd,CAAwBC,mBAAxB;;AAEAF,cAAcC,SAAd,CAAwBE,UAAxB;;AAEA,AAAO,IAAMC,gBAAgB,uBAASC,KAAT,EAAgB;MACvCC,iDAAkDD,KAAD,CAAQH,mBAA7D;MACI,CAACI,iBAAL,EAAwB;wBACF,IAAIC,OAAJ,EAApB;iCAC8BF,KAAD,CAAQH,mBAAR,GAA8BI,iBAA9B;;;MAG3BE,gBAAgBT,UAApB;WACSK,aAAT,CAAuBK,IAAvB,EAA6B;QACvBC,uCAAwCD,IAAD,CAAON,UAAlD;QACIO,WAAWA,QAAQF,aAAR,CAAf,EAAuC;aAC9BC,IAAP;;QAEEE,MAAML,iBAAV;QACIM,WAAWD,IAAI5I,GAAJ,CAAQ0I,IAAR,CAAf;QACI,CAACG,QAAL,EAAe;yCACuBP,KAAD,CAAQI,IAAR,CAAnC;UACIvI,GAAJ,CAAQuI,IAAR,EAAcG,QAAd;;;;;QAKEC,WAAWC,OAAOC,MAAP,+BAA4CH,QAAD,CAAWT,UAAX,IAAyBO,OAAzB,IAAoC,IAA/E,CAAf;aACSF,aAAT,IAA0B,IAA1B;iCAC8BI,QAAD,CAAWT,UAAX,GAAwBU,QAAxB;WACtBD,QAAP;;;SAGKR,aAAP;CA5BK;;ACbP,IAAMY,YAAU,EAAhB;AACA,IAAMC,gBAAgB,SAAtB;AACA,IAAMC,gBAAgB,UAAtB;;AAEA,AAAO,SAASC,eAAT,CAAyBC,IAAzB,EAA+B;SAC7BJ,UAAQI,IAAR,MACLJ,UAAQI,IAAR,IAAgBA,KAAKC,OAAL,CAAa,GAAb,IAAoB,CAApB,GAAwBD,IAAxB,GAA+BA,KAAKE,OAAL,CAAaL,aAAb,EAC7C,UAACM,CAAD;WAAOA,EAAE,CAAF,EAAKC,WAAL,EAAP;GAD6C,CAD1C,CAAP;;;AAOF,AAAO,SAASC,eAAT,CAAyBC,KAAzB,EAAgC;SAC9BV,UAAQU,KAAR,MACLV,UAAQU,KAAR,IAAiBA,MAAMJ,OAAN,CAAcJ,aAAd,EAA6B,KAA7B,EAAoCS,WAApC,EADZ,CAAP;;;;;;;;ACVF;AACA,IAAIC,sBAAsB,CAA1B;AACA,IAAIC,sBAAsB,CAA1B;AACA,IAAIC,qBAAqB,EAAzB;AACA,IAAIC,uBAAuB,CAA3B;AACA,IAAIC,gBAAgBjI,SAASkI,cAAT,CAAwB,EAAxB,CAApB;AACA,IAAItC,OAAOuC,gBAAX,CAA4BC,cAA5B,EAA4CC,OAA5C,CAAoDJ,aAApD,EAAmE,EAACK,eAAe,IAAhB,EAAnE;;AAEA,SAASF,cAAT,GAA0B;MAClBG,MAAMR,mBAAmB/G,MAA/B;OACK,IAAID,IAAI,CAAb,EAAgBA,IAAIwH,GAApB,EAAyBxH,GAAzB,EAA8B;QACxByH,KAAKT,mBAAmBhH,CAAnB,CAAT;QACIyH,EAAJ,EAAQ;UACF;;OAAJ,CAEE,OAAOC,CAAP,EAAU;mBACC,YAAM;gBAAQA,CAAN;SAAnB;;;;qBAIaC,MAAnB,CAA0B,CAA1B,EAA6BH,GAA7B;yBACuBA,GAAvB;;;AAGF,AAAO,IAAMI,UAAU;;;;;;;;;OAAA,iBASfC,KATe,EASR;WACH;SAAA,eACFC,EADE,EACE;eAASC,WAAWD,EAAX,EAAeD,KAAf,CAAP;OADJ;;cAEEhD,OAAOmD,YAAP,CAAoBC,IAApB,CAAyBpD,MAAzB;KAFV;GAVmB;;;;;;;;;OAsBhBA,OAAOkD,UAAP,CAAkBE,IAAlB,CAAuBpD,MAAvB,CAtBgB;;;;;;;UA6BbA,OAAOmD,YAAP,CAAoBC,IAApB,CAAyBpD,MAAzB;CA7BH;;AAgCP,AAAO,IAAMqD,iBAAiB;;;;;;;;OAQvBrD,OAAOsD,qBAAP,CAA6BF,IAA7B,CAAkCpD,MAAlC,CARuB;;;;;;;UAepBA,OAAOuD,oBAAP,CAA4BH,IAA5B,CAAiCpD,MAAjC;CAfH;;AAkBP;;AA0BA,AAAO,IAAMwD,YAAY;;;;;;;;;KAAA,eASnBC,QATmB,EAST;kBACErH,WAAd,GAA4BgG,sBAA5B;uBACmBtG,IAAnB,CAAwB2H,QAAxB;WACOxB,qBAAP;GAZqB;;;;;;;;;QAAA,kBAqBhByB,MArBgB,EAqBR;QACPC,MAAMD,SAASxB,mBAArB;QACIyB,OAAO,CAAX,EAAc;UACR,CAACxB,mBAAmBwB,GAAnB,CAAL,EAA8B;cACtB,IAAI7E,KAAJ,CAAU,2BAA2B4E,MAArC,CAAN;;yBAEiBC,GAAnB,IAA0B,IAA1B;;;CA3BC;;ACpGP,IAAItC,UAAUuC,SAAd;;AAEA,IAAIC,YAAYL,SAAhB;;;;;AAKA,IAAMM,mBAAmB,EAAzB;AACA,IAAIC,QAAQC,YAAY1D,SAAxB;AACA,OAAOyD,KAAP,EAAc;MACRE,QAAQ9C,OAAO+C,mBAAP,CAA2BH,KAA3B,CAAZ;OACK,IAAI5I,IAAE,CAAX,EAAcA,IAAE8I,MAAM7I,MAAtB,EAA8BD,GAA9B,EAAmC;qBAChB8I,MAAM9I,CAAN,CAAjB,IAA6B,IAA7B;;UAEMgG,OAAOgD,cAAP,CAAsBJ,KAAtB,CAAR;;;;;;;;;;;;;;;;AAgBF,SAASK,iBAAT,CAA2BC,KAA3B,EAAkCC,QAAlC,EAA4C;;MAEtC,CAACR,iBAAiBQ,QAAjB,CAAL,EAAiC;QAC3B9I,QAAQ6I,MAAMC,QAAN,CAAZ;QACI9I,UAAUnD,SAAd,EAAyB;UACnBgM,MAAME,MAAV,EAAkB;;;cAGVC,mBAAN,CAA0BF,QAA1B,EAAoC9I,KAApC;OAHF,MAIO;;YAED,CAAC6I,MAAMI,WAAX,EAAwB;gBAChBA,WAAN,GAAoB,EAApB;SADF,MAEO,IAAI,CAACJ,MAAMK,cAAN,CAAqBzE,0BAA0B,aAA1B,EAAyCoE,KAAzC,CAArB,CAAL,EAA4E;gBAC3EI,WAAN,GAAoBtD,OAAOC,MAAP,CAAciD,MAAMI,WAApB,CAApB;;cAEIA,WAAN,CAAkBH,QAAlB,IAA8B9I,KAA9B;;;;;;AAMR,AAAO,IAAMmJ,oBAAoBlE,cAAc,sBAAc;;;;;;;;;MASrDkE,iBATqD;;;;;;;;;;;;;;sDAmBlB;YACjCC,KAAK,KAAKC,kBAAd;aACK,IAAI1J,KAAE,CAAX,EAAcA,KAAIyJ,GAAGxJ,MAArB,EAA6BD,IAA7B,EAAkC;eAC3BmF,SAAL,CAAewE,uBAAf,CAAuCzD,QAAQG,eAAR,CAAwBoD,GAAGzJ,EAAH,CAAxB,CAAvC;;;;;iCAIU;;;;;;YAGP4J,aAAL;;YAEKC,aAAL;;YAEKC,aAAL;;YAEKC,WAAL;;YAEKC,aAAL;;YAEKZ,MAAL;;YAEKa,aAAL;;YAEKC,SAAL;;YAEKZ,WAAL;;YAEKa,iBAAL;;YAEKC,mBAAL;YACKC,qBAAL;;;;;;;;;;;;;;;;+CAWuBxL,IA7DgC,EA6D1ByL,GA7D0B,EA6DrBjK,KA7DqB,EA6Dd;YACrCiK,QAAQjK,KAAZ,EAAmB;eACZkK,oBAAL,CAA0B1L,IAA1B,EAAgCwB,KAAhC;;;;;;;;;;;;;;;8CAYoB;aACjBuJ,aAAL,GAAqB,KAArB;aACKC,aAAL,GAAqB,CAArB;aACKC,aAAL,GAAqB,KAArB;aACKC,WAAL,GAAmB,KAAnB;aACKC,aAAL,GAAqB,KAArB;aACKZ,MAAL,GAAc,EAAd;aACKa,aAAL,GAAqB,IAArB;aACKC,SAAL,GAAiB,IAAjB;YACI,KAAKZ,WAAT,EAAsB;eACfkB,0BAAL,CAAgC,KAAKlB,WAArC;eACKA,WAAL,GAAmB,IAAnB;;;;;aAKG,IAAImB,CAAT,IAAc,KAAKN,iBAAnB,EAAsC;cAChC,KAAKZ,cAAL,CAAoBkB,CAApB,CAAJ,EAA4B;iBACrBL,mBAAL,GAA2B,KAAKA,mBAAL,IAA4B,EAAvD;iBACKA,mBAAL,CAAyBK,CAAzB,IAA8B,KAAKA,CAAL,CAA9B;mBACO,KAAKA,CAAL,CAAP;;;;;;;;;;;;;;;;;;;;iDAiBqB3B,KAhH8B,EAgHvB;aAC3B,IAAI2B,CAAT,IAAc3B,KAAd,EAAqB;eACd4B,YAAL,CAAkBD,CAAlB,EAAqB3B,MAAM2B,CAAN,CAArB;;;;;;;;;;;;;;;;;;;oDAgB0B3B,KAlI2B,EAkIpB;eAC5B6B,MAAP,CAAc,IAAd,EAAoB7B,KAApB;;;;;;;;;;;;;;uCAWe5I,SA9IwC,EA8I7BG,KA9I6B,EA8ItB;YAC7B,CAAC,KAAKuK,YAAL,CAAkB1K,SAAlB,CAAL,EAAmC;eAC5B2K,qBAAL,CAA2B,IAA3B,EAAiCxK,KAAjC,EAAwCH,SAAxC;;;;;;;;;;;;;;;;;2CAciBA,SA9JoC,EA8JzBG,KA9JyB,EA8JlB1B,IA9JkB,EA8JZ;;YAEvC,CAAC,KAAKiL,aAAV,EAAyB;cACnBT,WAAWjD,QAAQG,eAAR,CAAwBnG,SAAxB,CAAf;eACKiJ,QAAL,IAAiB,KAAK2B,iBAAL,CAAuBzK,KAAvB,EAA8B1B,IAA9B,CAAjB;;;;;;;;;;;;;;2CAWiBwK,QA7KoC,EA6K1BjJ,SA7K0B,EA6KfG,KA7Ke,EA6KR;aAC1CuJ,aAAL,GAAqB,IAArB;gBACSmB,UAAU9K,MAAV,GAAmB,CAApB,GAAyB,KAAKkJ,QAAL,CAAzB,GAA0C9I,KAAlD;aACKwK,qBAAL,CAA2B,IAA3B,EAAiCxK,KAAjC,EACEH,aAAagG,QAAQS,eAAR,CAAwBwC,QAAxB,CADf;aAEKS,aAAL,GAAqB,KAArB;;;;;;;;;;;;;;;;;;4CAeoBjK,IAjMmC,EAiM7BU,KAjM6B,EAiMtBH,SAjMsB,EAiMX;YACxC8K,MAAM,KAAKC,eAAL,CAAqB5K,KAArB,CAAV;YACI2K,QAAQ9N,SAAZ,EAAuB;eAChB0D,eAAL,CAAqBV,SAArB;SADF,MAEO;eACAiC,YAAL,CAAkBjC,SAAlB,EAA6B8K,GAA7B;;;;;;;;;;;;;;;;;sCAcY3K,KApNyC,EAoNlC;;uBAENA,KAAf,yCAAeA,KAAf;eACO,SAAL;mBACSA,QAAQ,EAAR,GAAanD,SAApB;;eAEG,QAAL;gBACMmD,iBAAiB6K,IAArB,EAA2B;qBAClB7K,MAAM8K,QAAN,EAAP;aADF,MAEO,IAAI9K,KAAJ,EAAW;kBACZ;uBACK+K,KAAKC,SAAL,CAAehL,KAAf,CAAP;eADF,CAEE,OAAMiL,CAAN,EAAS;uBACF,EAAP;;;;;mBAKGjL,SAAS,IAAT,GAAgBA,MAAM8K,QAAN,EAAhB,GAAmCjO,SAA1C;;;;;;;;;;;;;;;;;;;;;;;;wCAqBYmD,KA3PuC,EA2PhC1B,IA3PgC,EA2P1B;;;;YAIzB4M,iBAAJ;gBACQ5M,IAAR;eACO6M,MAAL;uBACaA,OAAOnL,KAAP,CAAX;;;eAGGoL,OAAL;uBACcpL,UAAU,IAAtB;;;eAGG2F,MAAL;gBACM;yBACSoF,KAAKM,KAAL,qBAA+BrL,KAA/B,CAAX;aADF,CAEE,OAAMiL,CAAN,EAAS;;;;;eAKRxJ,KAAL;gBACM;yBACSsJ,KAAKM,KAAL,qBAA+BrL,KAA/B,CAAX;aADF,CAEE,OAAMiL,CAAN,EAAS;yBACE,IAAX;sBACQK,IAAR,2DAAoEtL,KAApE;;;;eAIC6K,IAAL;uBACa,IAAIA,IAAJ,CAAS7K,KAAT,CAAX;;;eAGGuL,MAAL;;uBAEavL,KAAX;;;;eAIGkL,QAAP;;;;;;;;;;;;;;;;;;;;;;;;;;;;8CAyBsBpC,QA7TiC,EA6TvB0C,QA7TuB,EA6Tb;YACtC,CAAC,KAAKtC,cAAL,CAAoB,mBAApB,CAAL,EAA+C;eACxCY,iBAAL,GAAyBnE,OAAO2E,MAAP,CAAc,EAAd,EAAkB,KAAKR,iBAAvB,CAAzB;;YAEE,CAAC,KAAKA,iBAAL,CAAuBhB,QAAvB,CAAL,EAAuC;eAChCgB,iBAAL,CAAuBhB,QAAvB,IAAmC,IAAnC;4BACkB,IAAlB,EAAwBA,QAAxB;iBACO2C,cAAP,CAAsB,IAAtB,EAA4B3C,QAA5B,EAAsC;;;iBAG/B,kBAAW;qBACP,KAAKC,MAAL,CAAYD,QAAZ,CAAP;aAJkC;;iBAO/B0C,WAAW,YAAW,EAAtB,GAA2B,UAASxL,KAAT,EAAgB;mBACzCqK,YAAL,CAAkBvB,QAAlB,EAA4B9I,KAA5B;;;WARJ;;;;;;;;;;;;;mCAqBS8I,QAzV4C,EAyVlC;eACd,KAAKgB,iBAAL,IAA0B,KAAKA,iBAAL,CAAuBhB,QAAvB,CAAjC;;;;;;;;;;;;;;mCAWWA,QArW4C,EAqWlC9I,KArWkC,EAqW3B;YACxB,KAAKgJ,mBAAL,CAAyBF,QAAzB,EAAmC9I,KAAnC,CAAJ,EAA+C;eACxC0L,qBAAL;;;;;;;;;;;;;;;;;;0CAegB5C,QAtXqC,EAsX3B9I,KAtX2B,EAsXpB;YAC/BiK,MAAM,KAAKlB,MAAL,CAAYD,QAAZ,CAAV;YACI6C,UAAU,KAAKC,qBAAL,CAA2B9C,QAA3B,EAAqC9I,KAArC,EAA4CiK,GAA5C,CAAd;YACI0B,OAAJ,EAAa;cACP,CAAC,KAAK/B,aAAV,EAAyB;iBAClBA,aAAL,GAAqB,EAArB;iBACKC,SAAL,GAAiB,EAAjB;;;cAGE,KAAKA,SAAL,IAAkB,EAAEf,YAAY,KAAKe,SAAnB,CAAtB,EAAqD;iBAC9CA,SAAL,CAAef,QAAf,IAA2BmB,GAA3B;;eAEGlB,MAAL,CAAYD,QAAZ,IAAwB9I,KAAxB;eACK4J,aAAL,CAAmBd,QAAnB,IAA+B9I,KAA/B;;eAEK2L,OAAP;;;;;;;;;;;;;yCAUiBjH,IA/YsC,EA+YhC;eAChB0G,QAAQ,KAAKxB,aAAL,IAAuBlF,QAAQ,KAAKkF,aAA5C,CAAP;;;;;;;;;;;;8CASsB;;;YAClB,CAAC,KAAKD,aAAN,IAAuB,KAAKD,WAAhC,EAA6C;eACtCC,aAAL,GAAqB,IAArB;oBACUkC,GAAV,CAAc,YAAM;gBACd,OAAKlC,aAAT,EAAwB;qBACjBA,aAAL,GAAqB,KAArB;qBACKmC,gBAAL;;WAHJ;;;;;;;;;;;;;;;0CAiBgB;YACd,CAAC,KAAKrC,aAAV,EAAyB;eAClBA,aAAL,GAAqB,IAArB;cACI,KAAKM,mBAAT,EAA8B;iBACvBgC,6BAAL,CAAmC,KAAKhC,mBAAxC;iBACKA,mBAAL,GAA2B,IAA3B;;eAEGiC,KAAL;;;;;;;;;;;;;;;;yCAae;YACb,KAAKpC,aAAL,IAAsB,KAAKC,SAA/B,EAA0C;cACpCoC,eAAe,KAAKrC,aAAxB;eACKA,aAAL,GAAqB,IAArB;eACKJ,aAAL;eACK0C,kBAAL,CAAwB,KAAKnD,MAA7B,EAAqCkD,YAArC,EAAmD,KAAKpC,SAAxD;eACKL,aAAL;;;;;;;;;;;;;;;;;;;;;8BAkBI;aACDE,WAAL,GAAmB,IAAnB;;aAEKoC,gBAAL;;;;;;;;;;;;;;;;;yCAciBK,YA1esC,EA0exBF,YA1ewB,EA0eVG,QA1eU,EA0eA,EA1eA;;;;;;;;;;;;;;;;;;;;;;;;;4CAggBnCtD,QAhgBmC,EAggBzB9I,KAhgByB,EAggBlBiK,GAhgBkB,EAggBb;;;kBAG/BjK,KAAR;;kBAESiK,GAAR,IAAejK,UAAUA,KAF1B;;;;;IA1fyBqM,UAT2B;;SA2gBpDlD,iBAAP;CA3gB+B,CAA1B;;ICvDMrM,UAAb;;;;;;;iCAKawP,MALb,EAKqB;;;gCAETA,MAPZ,EAOoBC,SAPpB,EAO+BC,KAP/B,EAOsC;;;+BANvB;mBACA,EAAP;;;;;;AAQR,IAAaC,gBAAb;gCAEkB;;;aACLC,UAAL,GAAkB,EAAlB;;;;;oCAGQJ,MANhB,EAMwBC,SANxB,EAMmCC,KANnC,EAM0C;mBAC3B,KAAKE,UAAL,CAAgBC,IAAhB,CAAqB,oBAAY;uBAC7BhQ,SAASiQ,OAAT,CAAiBN,MAAjB,EAAyBC,SAAzB,EAAoCC,KAApC,CAAP;aADG,CAAP;;;;6BAKC7P,QAZT,EAYmB;iBACN+P,UAAL,CAAgBpM,IAAhB,CAAqB3D,QAArB;;;;iCAGK;iBACA+P,UAAL,GAAkB,EAAlB;;;;;;AC3BD,IAAMG,gBAAgB,IAAIJ,gBAAJ,EAAtB;AACP,AAAO,IAAMK,gBAAgB,IAAIL,gBAAJ,EAAtB;;;;;ACHP,AAKA,IAAMM,iBAAiB,SAAjBA,cAAiB,CAACC,IAAD;WAAUvQ,IAAV,kBAMrBuQ,IANqB;CAAvB;;AASA,IAAMC,mBAAmBxQ,IAAnB,kBAAN;;AAEA,IAAayQ,OAAb;;;uBAEiB;;;;;cAGJX,SAAL,GAAiB,IAAjB;cACKY,aAAL,GAAqB,IAArB;cACKb,MAAL,GAAc,IAAd;cACKc,aAAL,GAAqB,KAArB;cACKC,eAAL,GAAuB,KAAvB;cACKC,MAAL,GAAc,EAAd;;;;;;4CAagB;iBACXC,iBAAL;;;;6CAGiB;iBACZC,OAAL;;;;kCAGM;gBACH,KAAKlB,MAAR,EAAgB;oBACR,CAAC,KAAKmB,UAAV,EAAsB;yBACbC,YAAL,CAAkB,EAACC,MAAM,MAAP,EAAlB;;;oBAGEhR,WAAWkQ,cAAce,WAAd,CAA0B,KAAKtB,MAA/B,EAAuC,KAAKC,SAA5C,EAAuD,KAAKY,aAA5D,CAAjB;oBACIhQ,eAAJ;;oBAEIR,QAAJ,EAAc;wBACNA,SAAS6B,IAAb,EAAmB;6BACVsD,YAAL,CAAkB,eAAlB,EAAmCnF,SAAS6B,IAA5C;;;6BAGKuO,eAAepQ,SAASA,QAAT,CAAkB,KAAK2P,MAAvB,EAA+B,KAAKgB,MAApC,CAAf,CAAT;iBALJ,MAMO,IAAI,CAAC,KAAKF,aAAV,EAAyB;6BACnBH,gBAAT;;4BAEQ3B,IAAR,CAAa,wBAAb,EAAuC,KAAKgB,MAA5C;;;yBAGGnP,MAAP,EAAe,KAAKsQ,UAApB;;;iBAGCI,aAAL,CAAmB,IAAIC,WAAJ,CAAgB,QAAhB,EAA0B,EAA1B,CAAnB;;;;+BA1C4B;mBACrB,CACH,QADG,EAEH,WAFG,EAGH,eAHG,EAIH,eAJG,EAKH,QALG,CAAP;;;;EAdqB3E,kBAAkBX,WAAlB,CAA7B;;AA2DA,AAMA0E,QAAQa,6BAAR;;AAEAvJ,OAAOwJ,cAAP,CAAsBC,MAAtB,CAA6B,UAA7B,EAAyCf,OAAzC;;;;;;;;;;;"}